import{r as x,u as En,a6 as On,R as qe,G as nt,c as ba,V as pa,W as ya,B as Wn,j as ne,F as Ke,b as c,l as Dt,aL as va,as as Pn,T as kt,n as ma,P as Wt,p as In,a9 as Vt,A as xa,S as qt,q as Kt,ab as lt,aM as ka,aN as Sa,z as Ca,ag as wa,I as Ta,D as Jt,E as Qt,a0 as La,a1 as _a,aI as Ma}from"./index-7a329043.js";import{L as An,u as Zt}from"./useCollectionDataPersistent-94b1f33f.js";import{G as $a,c as yt,I as en,K as tn,_ as ut,L as Vn,N as Nt,U as Bn,Y as Ea,Z as Oa,$ as Wa,a0 as Pa,a1 as jn,a2 as Ia,a3 as Aa,a4 as Ht,a5 as Gt,a6 as Rn,a7 as zn,a8 as Va,a9 as Ba,aa as ja,ab as Ra,ac as za,ad as Fa,ae as Da,af as Fn,ag as Na,ah as Ha,ai as Dn,aj as Ga,ak as Ya,al as Ua,am as Xa,an as qa,ao as Ka,ap as Ja,aq as Qa,ar as Za,as as er,at as tr,au as nr,V as Be,l as ht,u as Tt,g as he,i as ar,av as rr,aw as Nn,t as Hn,h as Gn,ax as nn,a as or,A as Yn,q as an,s as ir,H as lr,Q as Pt,ay as It,v as sr,x as dr,W as rn,az as cr,r as ur,n as hr,B as fr,m as gr,S as br,J as pr,o as yr,aA as Yt,aB as vr,aC as mr,aD as on,D as xr,C as ln,O as kr}from"./nivo-legends.es-b1710e85.js";import{H as Sr,t as Cr}from"./tinycolor-5daaf9a4.js";import{u as wr,z as Tr,l as Lr,T as _r,N as Mr,m as vt,n as $r}from"./index-89186db0.js";const Un=x.exports.createContext(null),Er=Un.Provider,Or=()=>x.exports.useContext(Un);var Wr=Object.defineProperty,St=Object.getOwnPropertySymbols,Xn=Object.prototype.hasOwnProperty,qn=Object.prototype.propertyIsEnumerable,sn=(e,t,n)=>t in e?Wr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pr=(e,t)=>{for(var n in t||(t={}))Xn.call(t,n)&&sn(e,n,t[n]);if(St)for(var n of St(t))qn.call(t,n)&&sn(e,n,t[n]);return e},Ir=(e,t)=>{var n={};for(var a in e)Xn.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&St)for(var a of St(e))t.indexOf(a)<0&&qn.call(e,a)&&(n[a]=e[a]);return n};const Ar={spacing:"xs"};function Kn(e){const t=En("ChipGroup",Ar,e),{value:n,defaultValue:a,onChange:r,spacing:o,multiple:i,children:l,unstyled:s}=t,d=Ir(t,["value","defaultValue","onChange","spacing","multiple","children","unstyled"]),[u,b]=On({value:n,defaultValue:a,finalValue:i?[]:null,onChange:r}),f=p=>Array.isArray(u)?u.includes(p):p===u,g=p=>{const h=p.currentTarget.value;Array.isArray(u)?b(u.includes(h)?u.filter(k=>k!==h):[...u,h]):b(h)};return qe.createElement(Er,{value:{isChipSelected:f,onChange:g,multiple:i}},qe.createElement(nt,Pr({spacing:o,unstyled:s},d),l))}Kn.displayName="@mantine/core/ChipGroup";var Vr=Object.defineProperty,Br=Object.defineProperties,jr=Object.getOwnPropertyDescriptors,dn=Object.getOwnPropertySymbols,Rr=Object.prototype.hasOwnProperty,zr=Object.prototype.propertyIsEnumerable,cn=(e,t,n)=>t in e?Vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tt=(e,t)=>{for(var n in t||(t={}))Rr.call(t,n)&&cn(e,n,t[n]);if(dn)for(var n of dn(t))zr.call(t,n)&&cn(e,n,t[n]);return e},un=(e,t)=>Br(e,jr(t));const hn={xs:24,sm:28,md:32,lg:36,xl:40},it={xs:10,sm:12,md:14,lg:16,xl:18},fn={xs:16,sm:20,md:24,lg:28,xl:32},gn={xs:7.5,sm:10,md:11.5,lg:13,xl:15};var Fr=ba((e,{radius:t,size:n,color:a},r)=>({root:{},label:un(tt({ref:r("label")},e.fn.fontStyles()),{boxSizing:"border-box",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"inline-block",alignItems:"center",userSelect:"none",border:"1px solid transparent",borderRadius:e.fn.radius(t),height:e.fn.size({size:n,sizes:hn}),fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:`${e.fn.size({size:n,sizes:hn})-2}px`,paddingLeft:e.fn.size({size:n,sizes:fn}),paddingRight:e.fn.size({size:n,sizes:fn}),cursor:"pointer",whiteSpace:"nowrap",transition:"background-color 100ms ease",WebkitTapHighlightColor:"transparent",'&[data-variant="filled"]':tt({backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[1]},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),'&[data-variant="outline"]':tt({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),"&[data-disabled]":un(tt({backgroundColor:`${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]} !important`,borderColor:`${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]} !important`,color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed"},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]})),{[`& .${r("iconWrapper")}`]:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}),"&[data-checked]":{paddingLeft:e.fn.size({size:n,sizes:gn}),paddingRight:e.fn.size({size:n,sizes:gn}),'&[data-variant="outline"]':{border:`1px solid ${e.fn.variant({variant:"filled",color:a}).background}`},'&[data-variant="filled"]':{"&, &:hover":{backgroundColor:e.fn.variant({variant:"light",color:a}).background}}}}),iconWrapper:{ref:r("iconWrapper"),color:e.fn.variant({variant:"filled",color:a}).background,width:e.fn.size({size:n,sizes:it})+e.fn.size({size:n,sizes:e.spacing})/1.5,maxWidth:e.fn.size({size:n,sizes:it})+e.fn.size({size:n,sizes:e.spacing})/1.5,height:e.fn.size({size:n,sizes:it}),display:"inline-block",verticalAlign:"middle",overflow:"hidden"},checkIcon:{width:e.fn.size({size:n,sizes:it}),height:e.fn.size({size:n,sizes:it})/1.1,display:"block"},input:{width:0,height:0,padding:0,opacity:0,margin:0,"&:focus":{outline:"none",[`& + .${r("label")}`]:tt({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${r("label")}`]:tt({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}}}}));const Dr=Fr;var Nr=Object.defineProperty,Ct=Object.getOwnPropertySymbols,Jn=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable,bn=(e,t,n)=>t in e?Nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mt=(e,t)=>{for(var n in t||(t={}))Jn.call(t,n)&&bn(e,n,t[n]);if(Ct)for(var n of Ct(t))Qn.call(t,n)&&bn(e,n,t[n]);return e},Hr=(e,t)=>{var n={};for(var a in e)Jn.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&Ct)for(var a of Ct(e))t.indexOf(a)<0&&Qn.call(e,a)&&(n[a]=e[a]);return n};const Gr={type:"checkbox",size:"sm",radius:"xl",variant:"outline"},Lt=x.exports.forwardRef((e,t)=>{const n=En("Chip",Gr,e),{radius:a,type:r,size:o,variant:i,disabled:l,id:s,color:d,children:u,className:b,classNames:f,style:g,styles:p,checked:h,defaultChecked:k,onChange:v,sx:T,wrapperProps:_,value:L,unstyled:W}=n,M=Hr(n,["radius","type","size","variant","disabled","id","color","children","className","classNames","style","styles","checked","defaultChecked","onChange","sx","wrapperProps","value","unstyled"]),E=Or(),m=pa(s),{systemStyles:S,rest:w}=ya(M),{classes:$,cx:I}=Dr({radius:a,size:o,color:d},{classNames:f,styles:p,unstyled:W,name:"Chip"}),[A,H]=On({value:h,defaultValue:k,finalValue:!1,onChange:v}),F=E?{checked:E.isChipSelected(L),onChange:E.onChange,type:E.multiple?"checkbox":"radio"}:{},j=F.checked||A;return qe.createElement(Wn,mt(mt({className:I($.root,b),style:g,sx:T},S),_),qe.createElement("input",mt(mt({type:r,className:$.input,checked:j,onChange:V=>H(V.currentTarget.checked),id:m,disabled:l,ref:t,value:L},F),w)),qe.createElement("label",{htmlFor:m,"data-checked":j||void 0,"data-disabled":l||void 0,"data-variant":i,className:$.label},j&&qe.createElement("span",{className:$.iconWrapper},qe.createElement($a,{className:$.checkIcon})),u))});Lt.displayName="@mantine/core/Chip";Lt.Group=Kn;var pn=Array.prototype.slice;function Yr(e,t){return e[t]}function Ur(){var e=yt([]),t=en,n=tn,a=Yr;function r(o){var i=e.apply(this,arguments),l,s=o.length,d=i.length,u=new Array(d),b;for(l=0;l<d;++l){for(var f=i[l],g=u[l]=new Array(s),p=0,h;p<s;++p)g[p]=h=[0,+a(o[p],f,p,o)],h.data=o[p];g.key=f}for(l=0,b=t(u);l<d;++l)u[b[l]].index=l;return n(u,b),u}return r.keys=function(o){return arguments.length?(e=typeof o=="function"?o:yt(pn.call(o)),r):e},r.value=function(o){return arguments.length?(a=typeof o=="function"?o:yt(+o),r):a},r.order=function(o){return arguments.length?(t=o==null?en:typeof o=="function"?o:yt(pn.call(o)),r):t},r.offset=function(o){return arguments.length?(n=o??tn,r):n},r}function Xr(e,t){for(var n=-1,a=e==null?0:e.length;++n<a&&t(e[n],n,e)!==!1;);return e}var qr=Xr,Kr=ut,Jr=Vn;function Qr(e,t){return e&&Kr(t,Jr(t),e)}var Zr=Qr,eo=ut,to=Nt;function no(e,t){return e&&eo(t,to(t),e)}var ao=no,ro=ut,oo=Bn;function io(e,t){return ro(e,oo(e),t)}var lo=io,so=Ea,co=Oa,uo=Bn,ho=Wa,fo=Object.getOwnPropertySymbols,go=fo?function(e){for(var t=[];e;)so(t,uo(e)),e=co(e);return t}:ho,Zn=go,bo=ut,po=Zn;function yo(e,t){return bo(e,po(e),t)}var vo=yo,mo=Pa,xo=Zn,ko=Nt;function So(e){return mo(e,ko,xo)}var ea=So,Co=Object.prototype,wo=Co.hasOwnProperty;function To(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&wo.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Lo=To,_o=jn;function Mo(e,t){var n=t?_o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var $o=Mo,Eo=/\w*$/;function Oo(e){var t=new e.constructor(e.source,Eo.exec(e));return t.lastIndex=e.lastIndex,t}var Wo=Oo,yn=Ia,vn=yn?yn.prototype:void 0,mn=vn?vn.valueOf:void 0;function Po(e){return mn?Object(mn.call(e)):{}}var Io=Po,Ao=jn,Vo=$o,Bo=Wo,jo=Io,Ro=Aa,zo="[object Boolean]",Fo="[object Date]",Do="[object Map]",No="[object Number]",Ho="[object RegExp]",Go="[object Set]",Yo="[object String]",Uo="[object Symbol]",Xo="[object ArrayBuffer]",qo="[object DataView]",Ko="[object Float32Array]",Jo="[object Float64Array]",Qo="[object Int8Array]",Zo="[object Int16Array]",ei="[object Int32Array]",ti="[object Uint8Array]",ni="[object Uint8ClampedArray]",ai="[object Uint16Array]",ri="[object Uint32Array]";function oi(e,t,n){var a=e.constructor;switch(t){case Xo:return Ao(e);case zo:case Fo:return new a(+e);case qo:return Vo(e,n);case Ko:case Jo:case Qo:case Zo:case ei:case ti:case ni:case ai:case ri:return Ro(e,n);case Do:return new a;case No:case Yo:return new a(e);case Ho:return Bo(e);case Go:return new a;case Uo:return jo(e)}}var ii=oi,li=Ht,si=Gt,di="[object Map]";function ci(e){return si(e)&&li(e)==di}var ui=ci,hi=ui,fi=zn,xn=Rn.exports,kn=xn&&xn.isMap,gi=kn?fi(kn):hi,bi=gi,pi=Ht,yi=Gt,vi="[object Set]";function mi(e){return yi(e)&&pi(e)==vi}var xi=mi,ki=xi,Si=zn,Sn=Rn.exports,Cn=Sn&&Sn.isSet,Ci=Cn?Si(Cn):ki,wi=Ci,Ti=Va,Li=qr,_i=Na,Mi=Zr,$i=ao,Ei=Ba.exports,Oi=ja,Wi=lo,Pi=vo,Ii=Da,Ai=ea,Vi=Ht,Bi=Lo,ji=ii,Ri=Ra,zi=Fn,Fi=za.exports,Di=bi,Ni=Fa,Hi=wi,Gi=Vn,Yi=Nt,Ui=1,Xi=2,qi=4,ta="[object Arguments]",Ki="[object Array]",Ji="[object Boolean]",Qi="[object Date]",Zi="[object Error]",na="[object Function]",el="[object GeneratorFunction]",tl="[object Map]",nl="[object Number]",aa="[object Object]",al="[object RegExp]",rl="[object Set]",ol="[object String]",il="[object Symbol]",ll="[object WeakMap]",sl="[object ArrayBuffer]",dl="[object DataView]",cl="[object Float32Array]",ul="[object Float64Array]",hl="[object Int8Array]",fl="[object Int16Array]",gl="[object Int32Array]",bl="[object Uint8Array]",pl="[object Uint8ClampedArray]",yl="[object Uint16Array]",vl="[object Uint32Array]",N={};N[ta]=N[Ki]=N[sl]=N[dl]=N[Ji]=N[Qi]=N[cl]=N[ul]=N[hl]=N[fl]=N[gl]=N[tl]=N[nl]=N[aa]=N[al]=N[rl]=N[ol]=N[il]=N[bl]=N[pl]=N[yl]=N[vl]=!0;N[Zi]=N[na]=N[ll]=!1;function xt(e,t,n,a,r,o){var i,l=t&Ui,s=t&Xi,d=t&qi;if(n&&(i=r?n(e,a,r,o):n(e)),i!==void 0)return i;if(!Ni(e))return e;var u=zi(e);if(u){if(i=Bi(e),!l)return Oi(e,i)}else{var b=Vi(e),f=b==na||b==el;if(Fi(e))return Ei(e,l);if(b==aa||b==ta||f&&!r){if(i=s||f?{}:Ri(e),!l)return s?Pi(e,$i(i,e)):Wi(e,Mi(i,e))}else{if(!N[b])return r?e:{};i=ji(e,b,l)}}o||(o=new Ti);var g=o.get(e);if(g)return g;o.set(e,i),Hi(e)?e.forEach(function(k){i.add(xt(k,t,n,k,e,o))}):Di(e)&&e.forEach(function(k,v){i.set(v,xt(k,t,n,v,e,o))});var p=d?s?Ai:Ii:s?Yi:Gi,h=u?void 0:p(e);return Li(h||e,function(k,v){h&&(v=k,k=e[v]),_i(i,v,xt(k,t,n,v,e,o))}),i}var ml=xt;function xl(e,t,n){var a=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++a<r;)o[a]=e[a+t];return o}var kl=xl,Sl=Ha,Cl=kl;function wl(e,t){return t.length<2?e:Sl(e,Cl(t,0,-1))}var Tl=wl,Ll=Dn,_l=Ga,Ml=Tl,$l=Ya;function El(e,t){return t=Ll(t,e),e=Ml(e,t),e==null||delete e[$l(_l(t))]}var Ol=El,Wl=Ua;function Pl(e){return Wl(e)?void 0:e}var Il=Pl,Al=qa,Vl=ml,Bl=Ol,jl=Dn,Rl=ut,zl=Il,Fl=Xa,Dl=ea,Nl=1,Hl=2,Gl=4,Yl=Fl(function(e,t){var n={};if(e==null)return n;var a=!1;t=Al(t,function(o){return o=jl(o,e),a||(a=o.length>1),o}),Rl(e,Dl(e),n),a&&(n=Vl(n,Nl|Hl|Gl,zl));for(var r=t.length;r--;)Bl(n,t[r]);return n}),ra=Yl,Ul=Ka,Xl=Gt,ql="[object Number]";function Kl(e){return typeof e=="number"||Xl(e)&&Ul(e)==ql}var wn=Kl,Jl=Ja;function Ql(e,t){var n=[];return Jl(e,function(a,r,o){t(a,r,o)&&n.push(a)}),n}var Zl=Ql,es=Za,ts=Zl,ns=Qa,as=Fn;function rs(e,t){var n=as(e)?es:ts;return n(e,ns(t))}var os=rs;function we(){return we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},we.apply(this,arguments)}var Bt={dotSize:4,noteWidth:120,noteTextOffset:8,animate:!0,motionStiffness:90,motionDamping:13},is=function(e){var t=typeof e;return x.exports.isValidElement(e)||t==="string"||t==="function"||t==="object"},ls=function(e){var t=typeof e;return t==="string"||t==="function"},dt=function(e){return e.type==="circle"},jt=function(e){return e.type==="dot"},ct=function(e){return e.type==="rect"},ss=function(e){var t=e.data,n=e.annotations,a=e.getPosition,r=e.getDimensions;return n.reduce(function(o,i){var l=i.offset||0;return[].concat(o,os(t,i.match).map(function(s){var d=a(s),u=r(s);return(dt(i)||ct(i))&&(u.size=u.size+2*l,u.width=u.width+2*l,u.height=u.height+2*l),we({},ra(i,["match","offset"]),d,u,{size:i.size||u.size,datum:s})}))},[])},ds=function(e,t,n,a){var r=Math.atan2(a-t,n-e);return nr(rr(r))},oa=function(e){var t,n,a=e.x,r=e.y,o=e.noteX,i=e.noteY,l=e.noteWidth,s=l===void 0?Bt.noteWidth:l,d=e.noteTextOffset,u=d===void 0?Bt.noteTextOffset:d;if(wn(o))t=a+o;else{if(o.abs===void 0)throw new Error("noteX should be either a number or an object containing an 'abs' property");t=o.abs}if(wn(i))n=r+i;else{if(i.abs===void 0)throw new Error("noteY should be either a number or an object containing an 'abs' property");n=i.abs}var b=a,f=r,g=ds(a,r,t,n);if(dt(e)){var p=er(tr(g),e.size/2);b+=p.x,f+=p.y}if(ct(e)){var h=Math.round((g+90)/45)%8;h===0&&(f-=e.height/2),h===1&&(b+=e.width/2,f-=e.height/2),h===2&&(b+=e.width/2),h===3&&(b+=e.width/2,f+=e.height/2),h===4&&(f+=e.height/2),h===5&&(b-=e.width/2,f+=e.height/2),h===6&&(b-=e.width/2),h===7&&(b-=e.width/2,f-=e.height/2)}var k=t,v=t;return(g+90)%360>180?(k-=s,v-=s):v+=s,{points:[[b,f],[t,n],[v,n]],text:[k,n-u],angle:g+90}},ia=function(e){var t=e.data,n=e.annotations,a=e.getPosition,r=e.getDimensions;return x.exports.useMemo(function(){return ss({data:t,annotations:n,getPosition:a,getDimensions:r})},[t,n,a,r])},cs=function(e){var t=e.annotations;return x.exports.useMemo(function(){return t.map(function(n){return we({},n,{computed:oa(we({},n))})})},[t])},us=function(e){return x.exports.useMemo(function(){return oa(e)},[e])},hs=function(e){var t=e.datum,n=e.x,a=e.y,r=e.note,o=Be(),i=ht(),l=i.animate,s=i.config,d=Tt({x:n,y:a,config:s,immediate:!l});return typeof r=="function"?x.exports.createElement(r,{x:n,y:a,datum:t}):ne(Ke,{children:[o.annotations.text.outlineWidth>0&&c(he.text,{x:d.x,y:d.y,style:we({},o.annotations.text,{strokeLinejoin:"round",strokeWidth:2*o.annotations.text.outlineWidth,stroke:o.annotations.text.outlineColor}),children:r}),c(he.text,{x:d.x,y:d.y,style:ra(o.annotations.text,["outlineWidth","outlineColor"]),children:r})]})},Tn=function(e){var t=e.points,n=e.isOutline,a=n!==void 0&&n,r=Be(),o=x.exports.useMemo(function(){var s=t[0];return t.slice(1).reduce(function(d,u){return d+" L"+u[0]+","+u[1]},"M"+s[0]+","+s[1])},[t]),i=ar(o);if(a&&r.annotations.link.outlineWidth<=0)return null;var l=we({},r.annotations.link);return a&&(l.strokeLinecap="square",l.strokeWidth=r.annotations.link.strokeWidth+2*r.annotations.link.outlineWidth,l.stroke=r.annotations.link.outlineColor,l.opacity=r.annotations.link.outlineOpacity),c(he.path,{fill:"none",d:i,style:l})},fs=function(e){var t=e.x,n=e.y,a=e.size,r=Be(),o=ht(),i=o.animate,l=o.config,s=Tt({x:t,y:n,radius:a/2,config:l,immediate:!i});return ne(Ke,{children:[r.annotations.outline.outlineWidth>0&&c(he.circle,{cx:s.x,cy:s.y,r:s.radius,style:we({},r.annotations.outline,{fill:"none",strokeWidth:r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,stroke:r.annotations.outline.outlineColor,opacity:r.annotations.outline.outlineOpacity})}),c(he.circle,{cx:s.x,cy:s.y,r:s.radius,style:r.annotations.outline})]})},gs=function(e){var t=e.x,n=e.y,a=e.size,r=a===void 0?Bt.dotSize:a,o=Be(),i=ht(),l=i.animate,s=i.config,d=Tt({x:t,y:n,radius:r/2,config:s,immediate:!l});return ne(Ke,{children:[o.annotations.outline.outlineWidth>0&&c(he.circle,{cx:d.x,cy:d.y,r:d.radius,style:we({},o.annotations.outline,{fill:"none",strokeWidth:2*o.annotations.outline.outlineWidth,stroke:o.annotations.outline.outlineColor,opacity:o.annotations.outline.outlineOpacity})}),c(he.circle,{cx:d.x,cy:d.y,r:d.radius,style:o.annotations.symbol})]})},bs=function(e){var t=e.x,n=e.y,a=e.width,r=e.height,o=e.borderRadius,i=o===void 0?6:o,l=Be(),s=ht(),d=s.animate,u=s.config,b=Tt({x:t-a/2,y:n-r/2,width:a,height:r,config:u,immediate:!d});return ne(Ke,{children:[l.annotations.outline.outlineWidth>0&&c(he.rect,{x:b.x,y:b.y,rx:i,ry:i,width:b.width,height:b.height,style:we({},l.annotations.outline,{fill:"none",strokeWidth:l.annotations.outline.strokeWidth+2*l.annotations.outline.outlineWidth,stroke:l.annotations.outline.outlineColor,opacity:l.annotations.outline.outlineOpacity})}),c(he.rect,{x:b.x,y:b.y,rx:i,ry:i,width:b.width,height:b.height,style:l.annotations.outline})]})},ps=function(e){var t=e.datum,n=e.x,a=e.y,r=e.note,o=us(e);if(!is(r))throw new Error("note should be a valid react element");return ne(Ke,{children:[c(Tn,{points:o.points,isOutline:!0}),dt(e)&&c(fs,{x:n,y:a,size:e.size}),jt(e)&&c(gs,{x:n,y:a,size:e.size}),ct(e)&&c(bs,{x:n,y:a,width:e.width,height:e.height,borderRadius:e.borderRadius}),c(Tn,{points:o.points}),c(hs,{datum:t,x:o.text[0],y:o.text[1],note:r})]})},Ln=function(e,t){t.forEach(function(n,a){var r=n[0],o=n[1];a===0?e.moveTo(r,o):e.lineTo(r,o)})},ys=function(e,t){var n=t.annotations,a=t.theme;n.length!==0&&(e.save(),n.forEach(function(r){if(!ls(r.note))throw new Error("note is invalid for canvas implementation");a.annotations.link.outlineWidth>0&&(e.lineCap="square",e.strokeStyle=a.annotations.link.outlineColor,e.lineWidth=a.annotations.link.strokeWidth+2*a.annotations.link.outlineWidth,e.beginPath(),Ln(e,r.computed.points),e.stroke(),e.lineCap="butt"),dt(r)&&a.annotations.outline.outlineWidth>0&&(e.strokeStyle=a.annotations.outline.outlineColor,e.lineWidth=a.annotations.outline.strokeWidth+2*a.annotations.outline.outlineWidth,e.beginPath(),e.arc(r.x,r.y,r.size/2,0,2*Math.PI),e.stroke()),jt(r)&&a.annotations.symbol.outlineWidth>0&&(e.strokeStyle=a.annotations.symbol.outlineColor,e.lineWidth=2*a.annotations.symbol.outlineWidth,e.beginPath(),e.arc(r.x,r.y,r.size/2,0,2*Math.PI),e.stroke()),ct(r)&&a.annotations.outline.outlineWidth>0&&(e.strokeStyle=a.annotations.outline.outlineColor,e.lineWidth=a.annotations.outline.strokeWidth+2*a.annotations.outline.outlineWidth,e.beginPath(),e.rect(r.x-r.width/2,r.y-r.height/2,r.width,r.height),e.stroke()),e.strokeStyle=a.annotations.link.stroke,e.lineWidth=a.annotations.link.strokeWidth,e.beginPath(),Ln(e,r.computed.points),e.stroke(),dt(r)&&(e.strokeStyle=a.annotations.outline.stroke,e.lineWidth=a.annotations.outline.strokeWidth,e.beginPath(),e.arc(r.x,r.y,r.size/2,0,2*Math.PI),e.stroke()),jt(r)&&(e.fillStyle=a.annotations.symbol.fill,e.beginPath(),e.arc(r.x,r.y,r.size/2,0,2*Math.PI),e.fill()),ct(r)&&(e.strokeStyle=a.annotations.outline.stroke,e.lineWidth=a.annotations.outline.strokeWidth,e.beginPath(),e.rect(r.x-r.width/2,r.y-r.height/2,r.width,r.height),e.stroke()),typeof r.note=="function"?r.note(e,{datum:r.datum,x:r.computed.text[0],y:r.computed.text[1],theme:a}):(e.font=a.annotations.text.fontSize+"px "+a.annotations.text.fontFamily,e.textAlign="left",e.textBaseline="alphabetic",e.fillStyle=a.annotations.text.fill,e.strokeStyle=a.annotations.text.outlineColor,e.lineWidth=2*a.annotations.text.outlineWidth,a.annotations.text.outlineWidth>0&&(e.lineJoin="round",e.strokeText(r.note,r.computed.text[0],r.computed.text[1]),e.lineJoin="miter"),e.fillText(r.note,r.computed.text[0],r.computed.text[1]))}),e.restore())};function z(){return z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},z.apply(this,arguments)}function at(e,t){if(e==null)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}var _n,vs=function(e){var t=e.bars,n=e.annotations,a=ia({data:t,annotations:n,getPosition:function(r){return{x:r.x+r.width/2,y:r.y+r.height/2}},getDimensions:function(r){var o=r.height,i=r.width;return{width:i,height:o,size:Math.max(i,o)}}});return c(Ke,{children:a.map(function(r,o){return c(ps,z({},r),o)})})},ms=function(e){var t=e.width,n=e.height,a=e.legends,r=e.toggleSerie;return c(Ke,{children:a.map(function(o,i){var l,s=o[0],d=o[1];return c(yr,z({},s,{containerWidth:t,containerHeight:n,data:(l=s.data)!=null?l:d,toggleSerie:s.toggleSerie&&s.dataFrom==="keys"?r:void 0}),i)})})},xs=["data"],ks=function(e){var t,n=e.bar,a=n.data,r=at(n,xs),o=e.style,i=o.borderColor,l=o.color,s=o.height,d=o.labelColor,u=o.labelOpacity,b=o.labelX,f=o.labelY,g=o.transform,p=o.width,h=e.borderRadius,k=e.borderWidth,v=e.label,T=e.shouldRenderLabel,_=e.isInteractive,L=e.onClick,W=e.onMouseEnter,M=e.onMouseLeave,E=e.tooltip,m=e.isFocusable,S=e.ariaLabel,w=e.ariaLabelledBy,$=e.ariaDescribedBy,I=Be(),A=Gn(),H=A.showTooltipFromEvent,F=A.showTooltipAt,j=A.hideTooltip,V=x.exports.useMemo(function(){return function(){return x.exports.createElement(E,z({},r,a))}},[E,r,a]),X=x.exports.useCallback(function(K){L==null||L(z({color:r.color},a),K)},[r,a,L]),se=x.exports.useCallback(function(K){return H(V(),K)},[H,V]),Z=x.exports.useCallback(function(K){W==null||W(a,K),H(V(),K)},[a,W,H,V]),fe=x.exports.useCallback(function(K){M==null||M(a,K),j()},[a,j,M]),re=x.exports.useCallback(function(){F(V(),[r.absX+r.width/2,r.absY])},[F,V,r]),je=x.exports.useCallback(function(){j()},[j]);return ne(he.g,{transform:g,children:[c(he.rect,{width:nn(p,function(K){return Math.max(K,0)}),height:nn(s,function(K){return Math.max(K,0)}),rx:h,ry:h,fill:(t=a.fill)!=null?t:l,strokeWidth:k,stroke:i,focusable:m,tabIndex:m?0:void 0,"aria-label":S?S(a):void 0,"aria-labelledby":w?w(a):void 0,"aria-describedby":$?$(a):void 0,onMouseEnter:_?Z:void 0,onMouseMove:_?se:void 0,onMouseLeave:_?fe:void 0,onClick:_?X:void 0,onFocus:_&&m?re:void 0,onBlur:_&&m?je:void 0}),T&&c(he.text,{x:b,y:f,textAnchor:"middle",dominantBaseline:"central",fillOpacity:u,style:z({},I.labels.text,{pointerEvents:"none",fill:d}),children:v})]})},Ss=["color","label"],G={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:function(e){var t=e.color,n=e.label,a=at(e,Ss);return c(or,{id:n,value:a.formattedValue,enableChip:!0,color:t})},tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[]},U=z({},G,{layers:["grid","axes","bars","markers","legends","annotations"],barComponent:ks,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),le=z({},G,{layers:["grid","axes","bars","legends","annotations"],pixelRatio:typeof window<"u"&&(_n=window.devicePixelRatio)!=null?_n:1}),la=function(e,t,n,a,r,o){return Yt(a,{all:e.map(t),min:0,max:0},r,o).padding(n)},sa=function(e,t){return e.map(function(n){return z({},t.reduce(function(a,r){return a[r]=null,a},{}),n)})},_t=function(e){return Object.keys(e).reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},{})},Mt=function(e){return[e,Number(e)]},Cs=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],Ut=function(e,t){return e>t},da=function(e,t){return e<t},ca=function(e,t){return Array.from(" ".repeat(t-e),function(n,a){return e+a})},ws=function(e){return Ut(e,0)?0:e},Ts=function(e,t,n,a){var r=e.data,o=e.formatValue,i=e.getColor,l=e.getIndex,s=e.getTooltipLabel,d=e.innerPadding,u=d===void 0?0:d,b=e.keys,f=e.xScale,g=e.yScale,p=e.margin,h=n?da:Ut,k=r.map(_t),v=[];return b.forEach(function(T,_){return ca(0,f.domain().length).forEach(function(L){var W,M,E,m=Mt(r[L][T]),S=m[0],w=m[1],$=l(r[L]),I=((W=f($))!=null?W:0)+t*_+u*_,A=h(M=w,0)?(E=g(M))!=null?E:0:a,H=function(j,V){var X;return h(j,0)?a-V:((X=g(j))!=null?X:0)-a}(w,A),F={id:T,value:S===null?S:w,formattedValue:o(w),hidden:!1,index:L,indexValue:$,data:k[L]};v.push({key:T+"."+F.indexValue,index:v.length,data:F,x:I,y:A,absX:p.left+I,absY:p.top+A,width:t,height:H,color:i(F),label:s(F)})})}),v},Ls=function(e,t,n,a){var r=e.data,o=e.formatValue,i=e.getIndex,l=e.getColor,s=e.getTooltipLabel,d=e.keys,u=e.innerPadding,b=u===void 0?0:u,f=e.xScale,g=e.yScale,p=e.margin,h=n?da:Ut,k=r.map(_t),v=[];return d.forEach(function(T,_){return ca(0,g.domain().length).forEach(function(L){var W,M,E,m=Mt(r[L][T]),S=m[0],w=m[1],$=i(r[L]),I=h(M=w,0)?a:(E=f(M))!=null?E:0,A=((W=g($))!=null?W:0)+t*_+b*_,H=function(j,V){var X;return h(j,0)?((X=f(j))!=null?X:0)-a:a-V}(w,I),F={id:T,value:S===null?S:w,formattedValue:o(w),hidden:!1,index:L,indexValue:$,data:k[L]};v.push({key:T+"."+F.indexValue,index:v.length,data:F,x:I,y:A,absX:p.left+I,absY:p.top+A,width:H,height:t,color:l(F),label:s(F)})})}),v},_s=function(e){var t,n,a=e.layout,r=e.minValue,o=e.maxValue,i=e.reverse,l=e.width,s=e.height,d=e.padding,u=d===void 0?0:d,b=e.innerPadding,f=b===void 0?0:b,g=e.valueScale,p=e.indexScale,h=e.hiddenIds,k=h===void 0?[]:h,v=at(e,Cs),T=v.keys.filter(function(Z){return!k.includes(Z)}),_=sa(v.data,T),L=a==="vertical"?["y","x",l]:["x","y",s],W=L[0],M=L[1],E=L[2],m=la(_,v.getIndex,u,p,E,M),S=z({max:o,min:r,reverse:i},g),w=S.min==="auto"?ws:function(Z){return Z},$=_.reduce(function(Z,fe){return[].concat(Z,T.map(function(re){return fe[re]}))},[]).filter(Boolean),I=w(Math.min.apply(Math,$)),A=(n=Math.max.apply(Math,$),isFinite(n)?n:0),H=Yt(S,{all:$,min:I,max:A},W==="x"?l:s,W),F=a==="vertical"?[m,H]:[H,m],j=F[0],V=F[1],X=(m.bandwidth()-f*(T.length-1))/T.length,se=[z({},v,{data:_,keys:T,innerPadding:f,xScale:j,yScale:V}),X,S.reverse,(t=H(0))!=null?t:0];return{xScale:j,yScale:V,bars:X>0?a==="vertical"?Ts.apply(void 0,se):Ls.apply(void 0,se):[]}},Ms=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],$s=function e(t){var n;return t.some(Array.isArray)?e((n=[]).concat.apply(n,t)):t},Es=function(e,t,n){var a=e.formatValue,r=e.getColor,o=e.getIndex,i=e.getTooltipLabel,l=e.innerPadding,s=e.stackedData,d=e.xScale,u=e.yScale,b=e.margin,f=[];return s.forEach(function(g){return d.domain().forEach(function(p,h){var k,v,T=g[h],_=(k=d(o(T.data)))!=null?k:0,L=((v=function(w){return u(w[n?0:1])}(T))!=null?v:0)+.5*l,W=function(w,$){var I;return((I=u(w[n?1:0]))!=null?I:0)-$}(T,L)-l,M=Mt(T.data[g.key]),E=M[0],m=M[1],S={id:g.key,value:E===null?E:m,formattedValue:a(m),hidden:!1,index:h,indexValue:p,data:_t(T.data)};f.push({key:g.key+"."+p,index:f.length,data:S,x:_,y:L,absX:b.left+_,absY:b.top+L,width:t,height:W,color:r(S),label:i(S)})})}),f},Os=function(e,t,n){var a=e.formatValue,r=e.getColor,o=e.getIndex,i=e.getTooltipLabel,l=e.innerPadding,s=e.stackedData,d=e.xScale,u=e.yScale,b=e.margin,f=[];return s.forEach(function(g){return u.domain().forEach(function(p,h){var k,v,T=g[h],_=(k=u(o(T.data)))!=null?k:0,L=((v=function(w){return d(w[n?1:0])}(T))!=null?v:0)+.5*l,W=function(w,$){var I;return((I=d(w[n?0:1]))!=null?I:0)-$}(T,L)-l,M=Mt(T.data[g.key]),E=M[0],m=M[1],S={id:g.key,value:E===null?E:m,formattedValue:a(m),hidden:!1,index:h,indexValue:p,data:_t(T.data)};f.push({key:g.key+"."+p,index:f.length,data:S,x:L,y:_,absX:b.left+L,absY:b.top+_,width:W,height:t,color:r(S),label:i(S)})})}),f},Ws=function(e){var t,n=e.data,a=e.layout,r=e.minValue,o=e.maxValue,i=e.reverse,l=e.width,s=e.height,d=e.padding,u=d===void 0?0:d,b=e.valueScale,f=e.indexScale,g=e.hiddenIds,p=g===void 0?[]:g,h=at(e,Ms),k=h.keys.filter(function(X){return!p.includes(X)}),v=Ur().keys(k).offset(vr)(sa(n,k)),T=a==="vertical"?["y","x",l]:["x","y",s],_=T[0],L=T[1],W=T[2],M=la(n,h.getIndex,u,f,W,L),E=z({max:o,min:r,reverse:i},b),m=(t=$s(v),b.type==="log"?t.filter(function(X){return X!==0}):t),S=Math.min.apply(Math,m),w=Math.max.apply(Math,m),$=Yt(E,{all:m,min:S,max:w},_==="x"?l:s,_),I=a==="vertical"?[M,$]:[$,M],A=I[0],H=I[1],F=h.innerPadding>0?h.innerPadding:0,j=M.bandwidth(),V=[z({},h,{innerPadding:F,stackedData:v,xScale:A,yScale:H}),j,E.reverse];return{xScale:A,yScale:H,bars:j>0?a==="vertical"?Es.apply(void 0,V):Os.apply(void 0,V):[]}},Ps=function(e){var t=e.bars,n=e.direction,a=e.from,r=e.groupMode,o=e.layout,i=e.legendLabel,l=e.reverse,s=mr(i??(a==="indexes"?"indexValue":"id"));return a==="indexes"?function(d,u,b){var f=on(d.map(function(g){var p,h;return{id:(p=g.data.indexValue)!=null?p:"",label:b(g.data),hidden:g.data.hidden,color:(h=g.color)!=null?h:"#000"}}),function(g){return g.id});return u==="horizontal"&&f.reverse(),f}(t,o,s):function(d,u,b,f,g,p){var h=on(d.map(function(k){var v;return{id:k.data.id,label:p(k.data),hidden:k.data.hidden,color:(v=k.color)!=null?v:"#000"}}),function(k){return k.id});return(u==="vertical"&&f==="stacked"&&b==="column"&&g!==!0||u==="horizontal"&&f==="stacked"&&g===!0)&&h.reverse(),h}(t,o,n,r,l,s)},ua=function(e){var t=e.indexBy,n=t===void 0?G.indexBy:t,a=e.keys,r=a===void 0?G.keys:a,o=e.label,i=o===void 0?G.label:o,l=e.tooltipLabel,s=l===void 0?G.tooltipLabel:l,d=e.valueFormat,u=e.colors,b=u===void 0?G.colors:u,f=e.colorBy,g=f===void 0?G.colorBy:f,p=e.borderColor,h=p===void 0?G.borderColor:p,k=e.labelTextColor,v=k===void 0?G.labelTextColor:k,T=e.groupMode,_=T===void 0?G.groupMode:T,L=e.layout,W=L===void 0?G.layout:L,M=e.reverse,E=M===void 0?G.reverse:M,m=e.data,S=e.minValue,w=S===void 0?G.minValue:S,$=e.maxValue,I=$===void 0?G.maxValue:$,A=e.margin,H=e.width,F=e.height,j=e.padding,V=j===void 0?G.padding:j,X=e.innerPadding,se=X===void 0?G.innerPadding:X,Z=e.valueScale,fe=Z===void 0?G.valueScale:Z,re=e.indexScale,je=re===void 0?G.indexScale:re,K=e.initialHiddenIds,Je=K===void 0?G.initialHiddenIds:K,Re=e.enableLabel,Te=Re===void 0?G.enableLabel:Re,Oe=e.labelSkipWidth,pe=Oe===void 0?G.labelSkipWidth:Oe,ze=e.labelSkipHeight,We=ze===void 0?G.labelSkipHeight:ze,Fe=e.legends,De=Fe===void 0?G.legends:Fe,Ne=e.legendLabel,He=x.exports.useState(Je??[]),Le=He[0],de=He[1],Qe=x.exports.useCallback(function(P){de(function(R){return R.indexOf(P)>-1?R.filter(function(be){return be!==P}):[].concat(R,[P])})},[]),_e=It(n),Me=It(i),ye=It(s),ge=sr(d),Ge=Be(),Pe=dr(b,g),oe=rn(h,Ge),ve=rn(v,Ge),J=(_==="grouped"?_s:Ws)({layout:W,reverse:E,data:m,getIndex:_e,keys:r,minValue:w,maxValue:I,width:H,height:F,getColor:Pe,padding:V,innerPadding:se,valueScale:fe,indexScale:je,hiddenIds:Le,formatValue:ge,getTooltipLabel:ye,margin:A}),Y=J.bars,$e=J.xScale,ee=J.yScale,me=x.exports.useMemo(function(){return Y.filter(function(P){return P.data.value!==null}).map(function(P,R){return z({},P,{index:R})})},[Y]),xe=x.exports.useCallback(function(P){var R=P.width,be=P.height;return!!Te&&!(pe>0&&R<pe)&&!(We>0&&be<We)},[Te,pe,We]),ke=x.exports.useMemo(function(){return r.map(function(P){var R=Y.find(function(be){return be.data.id===P});return z({},R,{data:z({id:P},R==null?void 0:R.data,{hidden:Le.includes(P)})})})},[Le,r,Y]),Ee=x.exports.useMemo(function(){return De.map(function(P){return[P,Ps({bars:P.dataFrom==="keys"?ke:Y,direction:P.direction,from:P.dataFrom,groupMode:_,layout:W,legendLabel:Ne,reverse:E})]})},[De,ke,Y,_,W,Ne,E]);return{bars:Y,barsWithValue:me,xScale:$e,yScale:ee,getIndex:_e,getLabel:Me,getTooltipLabel:ye,formatValue:ge,getColor:Pe,getBorderColor:oe,getLabelColor:ve,shouldRenderBarLabel:xe,hiddenIds:Le,toggleSerie:Qe,legendsWithData:Ee}},Is=["isInteractive","animate","motionConfig","theme","renderWrapper"],As=function(e){var t=e.data,n=e.indexBy,a=e.keys,r=e.margin,o=e.width,i=e.height,l=e.groupMode,s=e.layout,d=e.reverse,u=e.minValue,b=e.maxValue,f=e.valueScale,g=e.indexScale,p=e.padding,h=e.innerPadding,k=e.axisTop,v=e.axisRight,T=e.axisBottom,_=T===void 0?U.axisBottom:T,L=e.axisLeft,W=L===void 0?U.axisLeft:L,M=e.enableGridX,E=M===void 0?U.enableGridX:M,m=e.enableGridY,S=m===void 0?U.enableGridY:m,w=e.gridXValues,$=e.gridYValues,I=e.layers,A=I===void 0?U.layers:I,H=e.barComponent,F=H===void 0?U.barComponent:H,j=e.enableLabel,V=j===void 0?U.enableLabel:j,X=e.label,se=e.labelSkipWidth,Z=se===void 0?U.labelSkipWidth:se,fe=e.labelSkipHeight,re=fe===void 0?U.labelSkipHeight:fe,je=e.labelTextColor,K=e.markers,Je=K===void 0?U.markers:K,Re=e.colorBy,Te=e.colors,Oe=e.defs,pe=Oe===void 0?U.defs:Oe,ze=e.fill,We=ze===void 0?U.fill:ze,Fe=e.borderRadius,De=Fe===void 0?U.borderRadius:Fe,Ne=e.borderWidth,He=Ne===void 0?U.borderWidth:Ne,Le=e.borderColor,de=e.annotations,Qe=de===void 0?U.annotations:de,_e=e.legendLabel,Me=e.tooltipLabel,ye=e.valueFormat,ge=e.isInteractive,Ge=ge===void 0?U.isInteractive:ge,Pe=e.tooltip,oe=Pe===void 0?U.tooltip:Pe,ve=e.onClick,J=e.onMouseEnter,Y=e.onMouseLeave,$e=e.legends,ee=e.role,me=ee===void 0?U.role:ee,xe=e.ariaLabel,ke=e.ariaLabelledBy,Ee=e.ariaDescribedBy,P=e.isFocusable,R=P===void 0?U.isFocusable:P,be=e.barAriaLabel,Ie=e.barAriaLabelledBy,Ae=e.barAriaDescribedBy,ft=e.initialHiddenIds,rt=ht(),gt=rt.animate,bt=rt.config,Ve=Yn(o,i,r),Ze=Ve.outerWidth,pt=Ve.outerHeight,Ye=Ve.margin,ce=Ve.innerWidth,Se=Ve.innerHeight,ie=ua({indexBy:n,label:X,tooltipLabel:Me,valueFormat:ye,colors:Te,colorBy:Re,borderColor:Le,labelTextColor:je,groupMode:l,layout:s,reverse:d,data:t,keys:a,minValue:u,maxValue:b,margin:Ye,width:ce,height:Se,padding:p,innerPadding:h,valueScale:f,indexScale:g,enableLabel:V,labelSkipWidth:Z,labelSkipHeight:re,legends:$e,legendLabel:_e,initialHiddenIds:ft}),Ue=ie.bars,$t=ie.barsWithValue,Xe=ie.xScale,C=ie.yScale,O=ie.getLabel,D=ie.getTooltipLabel,q=ie.getBorderColor,B=ie.getLabelColor,ue=ie.shouldRenderBarLabel,te=ie.toggleSerie,Q=ie.legendsWithData,Et=cr($t,{keys:function(y){return y.key},from:function(y){return z({borderColor:q(y),color:y.color,height:0,labelColor:B(y),labelOpacity:0,labelX:y.width/2,labelY:y.height/2,transform:"translate("+y.x+", "+(y.y+y.height)+")",width:y.width},s==="vertical"?{}:{height:y.height,transform:"translate("+y.x+", "+y.y+")",width:0})},enter:function(y){return{borderColor:q(y),color:y.color,height:y.height,labelColor:B(y),labelOpacity:1,labelX:y.width/2,labelY:y.height/2,transform:"translate("+y.x+", "+y.y+")",width:y.width}},update:function(y){return{borderColor:q(y),color:y.color,height:y.height,labelColor:B(y),labelOpacity:1,labelX:y.width/2,labelY:y.height/2,transform:"translate("+y.x+", "+y.y+")",width:y.width}},leave:function(y){return z({borderColor:q(y),color:y.color,height:0,labelColor:B(y),labelOpacity:0,labelX:y.width/2,labelY:0,transform:"translate("+y.x+", "+(y.y+y.height)+")",width:y.width},s==="vertical"?{}:{labelX:0,labelY:y.height/2,height:y.height,transform:"translate("+y.x+", "+y.y+")",width:0})},config:bt,immediate:!gt}),et=x.exports.useMemo(function(){return{borderRadius:De,borderWidth:He,enableLabel:V,isInteractive:Ge,labelSkipWidth:Z,labelSkipHeight:re,onClick:ve,onMouseEnter:J,onMouseLeave:Y,getTooltipLabel:D,tooltip:oe,isFocusable:R,ariaLabel:be,ariaLabelledBy:Ie,ariaDescribedBy:Ae}},[De,He,V,D,Ge,re,Z,ve,J,Y,oe,R,be,Ie,Ae]),ot=ur(pe,Ue,We,{dataKey:"data",targetKey:"data.fill"}),Ce={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null};A.includes("annotations")&&(Ce.annotations=c(vs,{bars:Ue,annotations:Qe},"annotations")),A.includes("axes")&&(Ce.axes=c(hr,{xScale:Xe,yScale:C,width:ce,height:Se,top:k,right:v,bottom:_,left:W},"axes")),A.includes("bars")&&(Ce.bars=c(x.exports.Fragment,{children:Et(function(y,ae){return x.exports.createElement(F,z({},et,{bar:ae,style:y,shouldRenderLabel:ue(ae),label:O(ae.data)}))})},"bars")),A.includes("grid")&&(Ce.grid=c(fr,{width:ce,height:Se,xScale:E?Xe:null,yScale:S?C:null,xValues:w,yValues:$},"grid")),A.includes("legends")&&(Ce.legends=c(ms,{width:ce,height:Se,legends:Q,toggleSerie:te},"legends")),A.includes("markers")&&(Ce.markers=c(gr,{markers:Je,width:ce,height:Se,xScale:Xe,yScale:C},"markers"));var Ot=x.exports.useMemo(function(){return z({},et,{margin:Ye,width:o,height:i,innerWidth:ce,innerHeight:Se,bars:Ue,legendData:Q,enableLabel:V,xScale:Xe,yScale:C,tooltip:oe,getTooltipLabel:D,onClick:ve,onMouseEnter:J,onMouseLeave:Y})},[et,Ye,o,i,ce,Se,Ue,Q,V,Xe,C,oe,D,ve,J,Y]);return c(br,{width:Ze,height:pt,margin:Ye,defs:ot,role:me,ariaLabel:xe,ariaLabelledBy:ke,ariaDescribedBy:Ee,isFocusable:R,children:A.map(function(y,ae){var Xt;return typeof y=="function"?c(x.exports.Fragment,{children:x.exports.createElement(y,Ot)},ae):(Xt=Ce==null?void 0:Ce[y])!=null?Xt:null})})},Vs=function(e){var t=e.isInteractive,n=t===void 0?U.isInteractive:t,a=e.animate,r=a===void 0?U.animate:a,o=e.motionConfig,i=o===void 0?U.motionConfig:o,l=e.theme,s=e.renderWrapper,d=at(e,Is);return c(Nn,{animate:r,isInteractive:n,motionConfig:i,renderWrapper:s,theme:l,children:c(As,z({isInteractive:n},d))})},Bs=["isInteractive","renderWrapper","theme"],At=function(e,t,n,a){return e.find(function(r){return pr(r.x+t.left,r.y+t.top,r.width,r.height,n,a)})},js=function(e){var t=e.data,n=e.indexBy,a=e.keys,r=e.margin,o=e.width,i=e.height,l=e.groupMode,s=e.layout,d=e.reverse,u=e.minValue,b=e.maxValue,f=e.valueScale,g=e.indexScale,p=e.padding,h=e.innerPadding,k=e.axisTop,v=e.axisRight,T=e.axisBottom,_=T===void 0?le.axisBottom:T,L=e.axisLeft,W=L===void 0?le.axisLeft:L,M=e.enableGridX,E=M===void 0?le.enableGridX:M,m=e.enableGridY,S=m===void 0?le.enableGridY:m,w=e.gridXValues,$=e.gridYValues,I=e.layers,A=I===void 0?le.layers:I,H=e.renderBar,F=H===void 0?function(C,O){var D=O.bar,q=D.color,B=D.height,ue=D.width,te=D.x,Q=D.y,Et=O.borderColor,et=O.borderRadius,ot=O.borderWidth,Ce=O.label,Ot=O.labelColor,y=O.shouldRenderLabel;if(C.fillStyle=q,ot>0&&(C.strokeStyle=Et,C.lineWidth=ot),C.beginPath(),et>0){var ae=Math.min(et,B);C.moveTo(te+ae,Q),C.lineTo(te+ue-ae,Q),C.quadraticCurveTo(te+ue,Q,te+ue,Q+ae),C.lineTo(te+ue,Q+B-ae),C.quadraticCurveTo(te+ue,Q+B,te+ue-ae,Q+B),C.lineTo(te+ae,Q+B),C.quadraticCurveTo(te,Q+B,te,Q+B-ae),C.lineTo(te,Q+ae),C.quadraticCurveTo(te,Q,te+ae,Q),C.closePath()}else C.rect(te,Q,ue,B);C.fill(),ot>0&&C.stroke(),y&&(C.textBaseline="middle",C.textAlign="center",C.fillStyle=Ot,C.fillText(Ce,te+ue/2,Q+B/2))}:H,j=e.enableLabel,V=j===void 0?le.enableLabel:j,X=e.label,se=e.labelSkipWidth,Z=se===void 0?le.labelSkipWidth:se,fe=e.labelSkipHeight,re=fe===void 0?le.labelSkipHeight:fe,je=e.labelTextColor,K=e.colorBy,Je=e.colors,Re=e.borderRadius,Te=Re===void 0?le.borderRadius:Re,Oe=e.borderWidth,pe=Oe===void 0?le.borderWidth:Oe,ze=e.borderColor,We=e.annotations,Fe=We===void 0?le.annotations:We,De=e.legendLabel,Ne=e.tooltipLabel,He=e.valueFormat,Le=e.isInteractive,de=Le===void 0?le.isInteractive:Le,Qe=e.tooltip,_e=Qe===void 0?le.tooltip:Qe,Me=e.onClick,ye=e.onMouseEnter,ge=e.onMouseLeave,Ge=e.legends,Pe=e.pixelRatio,oe=Pe===void 0?le.pixelRatio:Pe,ve=e.canvasRef,J=x.exports.useRef(null),Y=Be(),$e=Yn(o,i,r),ee=$e.margin,me=$e.innerWidth,xe=$e.innerHeight,ke=$e.outerWidth,Ee=$e.outerHeight,P=ua({indexBy:n,label:X,tooltipLabel:Ne,valueFormat:He,colors:Je,colorBy:K,borderColor:ze,labelTextColor:je,groupMode:l,layout:s,reverse:d,data:t,keys:a,minValue:u,maxValue:b,margin:ee,width:me,height:xe,padding:p,innerPadding:h,valueScale:f,indexScale:g,enableLabel:V,labelSkipWidth:Z,labelSkipHeight:re,legends:Ge,legendLabel:De}),R=P.bars,be=P.barsWithValue,Ie=P.xScale,Ae=P.yScale,ft=P.getLabel,rt=P.getTooltipLabel,gt=P.getBorderColor,bt=P.getLabelColor,Ve=P.shouldRenderBarLabel,Ze=P.legendsWithData,pt=Gn(),Ye=pt.showTooltipFromEvent,ce=pt.hideTooltip,Se=cs({annotations:ia({data:R,annotations:Fe,getPosition:function(C){return{x:C.x,y:C.y}},getDimensions:function(C){var O=C.width,D=C.height;return{width:O,height:D,size:Math.max(O,D)}}})}),ie=x.exports.useMemo(function(){return{borderRadius:Te,borderWidth:pe,isInteractive:de,isFocusable:!1,labelSkipWidth:Z,labelSkipHeight:re,margin:ee,width:o,height:i,innerWidth:me,innerHeight:xe,bars:R,legendData:Ze,enableLabel:V,xScale:Ie,yScale:Ae,tooltip:_e,getTooltipLabel:rt,onClick:Me,onMouseEnter:ye,onMouseLeave:ge}},[Te,pe,de,Z,re,ee,o,i,me,xe,R,Ze,V,Ie,Ae,_e,rt,Me,ye,ge]);x.exports.useEffect(function(){var C,O=(C=J.current)==null?void 0:C.getContext("2d");J.current&&O&&(J.current.width=ke*oe,J.current.height=Ee*oe,O.scale(oe,oe),O.fillStyle=Y.background,O.fillRect(0,0,ke,Ee),O.translate(ee.left,ee.top),A.forEach(function(D){D==="grid"?typeof Y.grid.line.strokeWidth=="number"&&Y.grid.line.strokeWidth>0&&(O.lineWidth=Y.grid.line.strokeWidth,O.strokeStyle=Y.grid.line.stroke,E&&an(O,{width:o,height:i,scale:Ie,axis:"x",values:w}),S&&an(O,{width:o,height:i,scale:Ae,axis:"y",values:$})):D==="axes"?ir(O,{xScale:Ie,yScale:Ae,width:me,height:xe,top:k,right:v,bottom:_,left:W,theme:Y}):D==="bars"?be.forEach(function(q){F(O,{bar:q,borderColor:gt(q),borderRadius:Te,borderWidth:pe,label:ft(q.data),labelColor:bt(q),shouldRenderLabel:Ve(q)})}):D==="legends"?Ze.forEach(function(q){var B=q[0],ue=q[1];lr(O,z({},B,{data:ue,containerWidth:me,containerHeight:xe,theme:Y}))}):D==="annotations"?ys(O,{annotations:Se,theme:Y}):typeof D=="function"&&D(O,ie)}),O.save())},[_,W,v,k,be,Te,pe,Se,E,S,gt,ft,bt,w,$,l,i,xe,me,ie,A,s,Ze,ee.left,ee.top,Ee,ke,oe,F,Ie,Ae,d,Ve,Y,o]);var Ue=x.exports.useCallback(function(C){if(R&&J.current){var O=Pt(J.current,C),D=O[0],q=O[1],B=At(R,ee,D,q);B!==void 0?(Ye(x.exports.createElement(_e,z({},B.data,{color:B.color,label:B.label,value:Number(B.data.value)})),C),C.type==="mouseenter"&&(ye==null||ye(B.data,C))):ce()}},[ce,ee,ye,R,Ye,_e]),$t=x.exports.useCallback(function(C){if(R&&J.current){ce();var O=Pt(J.current,C),D=O[0],q=O[1],B=At(R,ee,D,q);B&&(ge==null||ge(B.data,C))}},[ce,ee,ge,R]),Xe=x.exports.useCallback(function(C){if(R&&J.current){var O=Pt(J.current,C),D=O[0],q=O[1],B=At(R,ee,D,q);B!==void 0&&(Me==null||Me(z({},B.data,{color:B.color}),C))}},[ee,Me,R]);return c("canvas",{ref:function(C){J.current=C,ve&&"current"in ve&&(ve.current=C)},width:ke*oe,height:Ee*oe,style:{width:ke,height:Ee,cursor:de?"auto":"normal"},onMouseEnter:de?Ue:void 0,onMouseMove:de?Ue:void 0,onMouseLeave:de?$t:void 0,onClick:de?Xe:void 0})},Rs=x.exports.forwardRef(function(e,t){var n=e.isInteractive,a=e.renderWrapper,r=e.theme,o=at(e,Bs);return c(Nn,{isInteractive:n,renderWrapper:a,theme:r,animate:!1,children:c(js,z({},o,{canvasRef:t}))})}),zs=function(e){return c(Hn,{children:function(t){var n=t.width,a=t.height;return c(Vs,z({width:n,height:a},e))}})};x.exports.forwardRef(function(e,t){return c(Hn,{children:function(n){var a=n.width,r=n.height;return c(Rs,z({width:a,height:r},e,{ref:t}))}})});function Fs({data:e,keys:t,markers:n,height:a=260,enableLeftTicks:r,enableLabels:o}){const i=Dt();return c(Wn,{pt:"md",sx:{height:a,width:"100%"},children:!!e.length&&c(zs,{data:e,keys:t,margin:{top:6,bottom:6,left:r?44:0},valueScale:{type:"linear"},indexScale:{type:"band"},axisLeft:{tickValues:3},axisBottom:null,groupMode:"grouped",defs:[xr("gradient",[{offset:0,color:"inherit"},{offset:100,color:"inherit",opacity:i.colorScheme==="dark"?.25:.5}])],fill:[{match:"*",id:"gradient"}],theme:{textColor:i.colorScheme==="dark"?i.colors.dark[2]:i.colors.gray[6],fontSize:12,axis:{ticks:{line:{strokeWidth:r?2:0}}},crosshair:{line:{stroke:i.colorScheme==="dark"?i.colors.dark[1]:i.colors.gray[7]}}},tooltip:({id:l,value:s,data:d})=>c(va,{p:"sm",bg:i.colorScheme==="dark"?i.colors.dark[8]:i.colors.gray[1],shadow:i.shadows.md,children:ne(nt,{spacing:"sm",children:[c(Pn,{size:14,color:`${d[`${l}Color`]}`}),c(kt,{size:"sm",color:"dimmed",inline:!0,children:l}),c(kt,{size:"sm",weight:"bold",inline:!0,children:s})]},l)}),markers:n.map(({color:l,value:s})=>({axis:"y",lineStyle:{stroke:l},value:s})),colors:({id:l,data:s})=>s[`${l}Color`]?`${s[`${l}Color`]}`:i.colorScheme==="dark"?i.colors.dark[5]:i.colors.gray[3],enableLabel:o,labelTextColor:({color:l})=>i.colorScheme==="dark"?i.fn.lighten(l,.25):i.fn.darken(l,.25),padding:r?.4/t.length:0,innerPadding:80/t.length,borderRadius:4,enableGridY:!1,motionConfig:"default"})})}const ha=10,fa=1,ga=1e5,Mn=vt.object({color:vt.number(),name:vt.string().trim().min(1,{message:"Required"}).max(ha),value:vt.number({invalid_type_error:"Required"}).min(fa).max(ga)});function Ds({markers:e,activeGroup:t,filters:n,updateFilter:a}){const r=Dt(),o=wr({initialValues:{color:0,name:""},validate:Tr(Mn)}),[i,l]=ma(!1),s=ne(Wt,{width:360,position:e!=null&&e.length?"bottom-end":"bottom-start",trapFocus:!0,opened:i,onChange:l.toggle,children:[c(Wt.Target,{children:e!=null&&e.length?c(In,{label:"Add marker",children:c(Vt.div,{layoutId:"addMarkerButton",children:c(xa,{color:r.primaryColor,variant:"light",size:"md",onClick:l.toggle,children:c(qt,{})})})}):c(Vt.div,{layoutId:"addMarkerButton",style:{width:"fit-content"},children:c(Kt,{variant:"light",leftIcon:c(qt,{}),h:34,onClick:l.toggle,children:"Add marker"})})}),c(Wt.Dropdown,{p:"md",children:c("form",{onSubmit:o.onSubmit(({color:d,...u})=>{t&&(l.close(),Lr(t.id,{color:`hsl(${d}, 100%, 50%)`,...Mn.omit({color:!0}).parse(u)}))}),children:ne(lt,{spacing:"sm",children:[c(Sr,{value:o.values.color,onChange:d=>o.setFieldValue("color",d),onChangeEnd:d=>o.setFieldValue("color",d)}),ne(nt,{align:"flex-start",spacing:"sm",grow:!0,children:[c(_r,{label:"Name",icon:c(ka,{}),placeholder:"Enter name",maxLength:ha,"data-autofocus":!0,...o.getInputProps("name")}),c(Mr,{label:"Value",icon:c(Sa,{}),placeholder:"Enter value",min:fa,max:ga,...o.getInputProps("value")})]}),c(nt,{position:"right",children:c(Kt,{variant:"filled",type:"submit",children:"Confirm"})})]})})})]});return x.exports.useEffect(()=>{i&&o.reset()},[i]),ne(lt,{children:[ne(lt,{spacing:"xs",children:[ne(nt,{position:"apart",children:[c(Ca,{order:3,children:"Markers"}),(e==null?void 0:e.length)&&s]}),c(An,{in:!!e,style:{minHeight:34},children:e!=null&&e.length?c(Lt.Group,{value:n.enabledMarkers,onChange:d=>a({enabledMarkers:d}),multiple:!0,children:c(wa,{children:e==null?void 0:e.map(d=>c(Hs,{activeGroup:t,marker:d},d.id))})}):s})]}),ne(nt,{pt:6,children:[c(ln,{checked:n.enableLeftTicks,label:"Enable left ticks",onChange:({target:{checked:d}})=>a({enableLeftTicks:d})}),c(ln,{checked:n.enableLabels,label:"Enable labels",onChange:({target:{checked:d}})=>a({enableLabels:d})})]})]})}function Rt(){return(Rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var wt,st;function zt(e){var t=e.nativeEvent;return window.TouchEvent?t instanceof TouchEvent:"touches"in t}function Ft(e){return e.nativeEvent instanceof MouseEvent}function $n(e){return zt(e)?{x:e.touches[0].pageX,y:e.touches[0].pageY}:Ft(e)?{x:e.pageX,y:e.pageY}:null}function Ns(e,t){var n=t===void 0?{}:t,a=n.threshold,r=a===void 0?400:a,o=n.captureEvent,i=o!==void 0&&o,l=n.detect,s=l===void 0?st.BOTH:l,d=n.cancelOnMovement,u=d!==void 0&&d,b=n.filterEvents,f=n.onStart,g=n.onMove,p=n.onFinish,h=n.onCancel,k=x.exports.useRef(!1),v=x.exports.useRef(!1),T=x.exports.useRef(),_=x.exports.useRef(e),L=x.exports.useRef(null),W=x.exports.useCallback(function(m){return function(S){if(!v.current&&(Ft(S)||zt(S))&&(b===void 0||b(S))){L.current=$n(S),i&&S.persist();var w=m===void 0?{}:{context:m};f==null||f(S,w),v.current=!0,T.current=setTimeout(function(){_.current&&(_.current(S,w),k.current=!0)},r)}}},[i,b,f,r]),M=x.exports.useCallback(function(m,S){return function(w){if(Ft(w)||zt(w)){L.current=null,i&&w.persist();var $=m===void 0?{}:{context:m};k.current?p==null||p(w,$):v.current&&(h==null||h(w,Rt({},$,{reason:S??wt.CANCELED_BY_TIMEOUT}))),k.current=!1,v.current=!1,T.current!==void 0&&clearTimeout(T.current)}}},[i,p,h]),E=x.exports.useCallback(function(m){return function(S){if(g==null||g(S,{context:m}),u&&L.current){var w=$n(S);if(w){var $=u===!0?25:u,I={x:Math.abs(w.x-L.current.x),y:Math.abs(w.y-L.current.y)};(I.x>$||I.y>$)&&M(m,wt.CANCELED_BY_MOVEMENT)(S)}}}},[M,u,g]);return x.exports.useEffect(function(){return function(){T.current!==void 0&&clearTimeout(T.current)}},[]),x.exports.useEffect(function(){_.current=e},[e]),x.exports.useMemo(function(){return function(m){var S={onMouseDown:W(m),onMouseMove:E(m),onMouseUp:M(m),onMouseLeave:M(m)},w={onTouchStart:W(m),onTouchMove:E(m),onTouchEnd:M(m)};return e===null?{}:s===st.MOUSE?S:s===st.TOUCH?w:Rt({},S,w)}},[e,M,s,E,W])}(function(e){e.CANCELED_BY_MOVEMENT="canceled-by-movement",e.CANCELED_BY_TIMEOUT="canceled-by-timeout"})(wt||(wt={})),function(e){e.BOTH="both",e.MOUSE="mouse",e.TOUCH="touch"}(st||(st={}));function Hs({activeGroup:e,marker:t}){const n=Dt(),a=Ns(()=>{e&&$r(e.id,t.id)},{threshold:500}),r={hidden:{opacity:0,scale:.98},visible:{opacity:1,scale:1}};return c(In,{label:"Long press to delete",openDelay:1e3,children:c(Vt.div,{variants:r,initial:"hidden",animate:"visible",exit:"hidden",layout:!0,...a(),children:ne(Lt,{value:t.id,variant:"filled",radius:"md",styles:{root:{position:"relative"},input:{position:"absolute"},label:{display:"flex",gap:n.spacing.xs,padding:n.spacing.md,"&[data-checked]":{padding:n.spacing.md}},iconWrapper:{display:"flex",alignItems:"center",width:"fit-content"}},children:[c(Pn,{size:12,color:t.color}),c(kt,{size:"sm",color:"dimmed",inline:!0,children:t.name}),c(kt,{size:"sm",weight:"bold",inline:!0,children:t.value})]})})})}function Ks({activeGroup:e}){const[t,n]=Ta({key:"stock-group-filters",defaultValue:{enabledMarkers:[],enableLeftTicks:!1,enableLabels:!0},getInitialValueInEffect:!1}),a=f=>{n(g=>({...g,...f}))},r=e?Jt(La(e.id),Qt("code","asc")):null,[o]=Zt(r),i=e?Jt(_a(e.id),Qt("value","desc")):null,[l]=Zt(i),s=t.enabledMarkers.map(f=>l==null?void 0:l.find(g=>g.id===f)).filter(f=>!!f),{data:d,keys:u}=x.exports.useMemo(()=>{let f=[],g=[];return o&&(f=[o.reduce((p,h)=>(p[h.code]=h.quantity,p[`${h.code}Color`]=h.color?Cr(h.color).toHexString():"",g.push(h.code),p),{})]),{data:f,keys:g}},[o]),b=x.exports.useMemo(()=>{const f=[];return o&&l&&s.forEach(({name:g,value:p})=>{f.push({text:o.filter(({quantity:h})=>h<p).length,sub:g})}),f.sort((g,p)=>p.text-g.text)},[t.enabledMarkers,o,l]);return ne(lt,{children:[c(An,{in:!!o,style:{minHeight:336},children:ne(lt,{spacing:0,children:[c(kr,{items:[{text:o==null?void 0:o.length,sub:"Items"},...b]}),c(Ma,{in:!!(o!=null&&o.length),children:c(Fs,{data:d,keys:u,markers:s,enableLeftTicks:t.enableLeftTicks,enableLabels:t.enableLabels})})]})}),c(Ds,{markers:l,activeGroup:e,filters:t,updateFilter:a})]})}export{Ks as default};
