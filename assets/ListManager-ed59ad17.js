import{r as d,u as j,a0 as L,j as e,a1 as g,i as h,A as f,k as S,T as y,l as k,m as w,p as M,q as C,a2 as R,M as z,a3 as m,a4 as T,E as A}from"./index-5ff1983a.js";import{T as I,c as D,f as P}from"./index-a67f9d8b.js";import{S as $}from"./LabeledSegmentedControl-01309ecf.js";function b(n){return t=>{if(!t)n(t);else if(typeof t=="function")n(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:s}=t;s.type==="checkbox"?n(s.checked):n(s.value)}else n(t)}}function E(n){const[t,s]=d.useState(n);return[t,b(s)]}function F({item:n,label:t}){const s=j(),c=L(()=>u(!1)),x=d.useRef(null),[l,u]=d.useState(!1),[o,i]=E(n.name),r=`${t}s`,p=()=>M({title:e.jsx(C,{order:5,children:`Are you sure you want to delete this ${t}?`}),labels:{confirm:"Delete",cancel:"Cancel"},onConfirm:()=>P(r,n.id),confirmProps:{color:"red"},size:"auto",centered:!0,target:".modal-container",zIndex:3});return d.useEffect(()=>{var a;l&&(i(n.name),(a=x.current)==null||a.focus())},[l]),e.jsxs(g.div,{ref:c,style:{display:"flex",alignItems:"center"},layoutId:n.id,layoutScroll:!0,children:[l?e.jsxs(e.Fragment,{children:[e.jsx(I,{ref:x,placeholder:"Enter name","data-autofocus":!0,pr:"xs",styles:a=>({input:{minHeight:34,height:34,paddingInline:a.spacing.xs-1}}),sx:{flex:1},value:o,onChange:a=>i(a)}),e.jsx(h,{label:"Confirm",withinPortal:!0,children:e.jsx(f,{color:s.primaryColor,onClick:()=>{u(!1),D(r,n.id,{name:o})},children:e.jsx(S,{})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{size:"sm",px:"xs",sx:{flex:1},children:n.name}),e.jsx(h,{label:"Edit name",withinPortal:!0,children:e.jsx(f,{color:s.primaryColor,onClick:()=>u(!0),children:e.jsx(k,{})})})]}),e.jsx(h,{label:"Delete",withinPortal:!0,children:e.jsx(f,{color:"red",onClick:p,children:e.jsx(w,{})})})]})}function q({opened:n,close:t,label:s,items:c,addItem:x}){const l=j(),{height:u}=R(),[o,i]=E(""),r=c==null?void 0:c.filter(a=>a.name.match(new RegExp(o,"gi"))),p=!!(r!=null&&r.find(a=>a.name.toLowerCase()===o.toLowerCase()));return d.useEffect(()=>{n&&i("")},[n]),e.jsx(z,{opened:n,title:e.jsx(C,{order:5,children:`Manage ${s}s`}),size:420,overflow:"inside",trapFocus:!0,onClose:t,target:".modal-container",zIndex:2,children:e.jsxs(m,{spacing:"sm",children:[e.jsx(I,{icon:e.jsx(T,{}),placeholder:`Search ${s}`,maxLength:36,"data-autofocus":!0,value:o,onChange:i}),e.jsx($.Autosize,{maxHeight:`calc(${u}px - 240px)`,children:e.jsxs(m,{spacing:"xs",pb:2,children:[r==null?void 0:r.map(a=>e.jsx(F,{item:a,label:s},a.id)),!!o.length&&!p&&e.jsxs(g.div,{style:{display:"flex",alignItems:"center"},layoutId:"search",children:[e.jsx(y,{size:"sm",px:"xs",sx:{flex:1},children:o}),e.jsx(h,{label:`Add ${s}`,withinPortal:!0,children:e.jsx(f,{color:l.primaryColor,onClick:()=>{x({name:o}),i("")},children:e.jsx(A,{})})})]})]})})]})})}export{q as L};
