import{u as j,a3 as w,r as u,j as e,a4 as g,i as h,A as m,k as E,T as C,l as M,m as R,p as S,q as y,a5 as k,M as z,a6 as f,a7 as A,E as T}from"./index-48b3660d.js";import{T as I,c as D,f as P}from"./index-7f844d03.js";import{u as L}from"./use-input-state-5155bde1.js";import{S as $}from"./LabeledSegmentedControl-9e85bab0.js";function v({item:n,label:d}){const r=j(),i=w(()=>c(!1)),x=u.useRef(null),[l,c]=u.useState(!1),[t,o]=L(n.name),a=`${d}s`,p=()=>S({title:e.jsx(y,{order:5,children:`Are you sure you want to delete this ${d}?`}),labels:{confirm:"Delete",cancel:"Cancel"},onConfirm:()=>P(a,n.id),confirmProps:{color:"red"},size:"auto",centered:!0,target:".modal-container",zIndex:3});return u.useEffect(()=>{var s;l&&(o(n.name),(s=x.current)==null||s.focus())},[l]),e.jsxs(g.div,{ref:i,style:{display:"flex",alignItems:"center"},layoutId:n.id,layoutScroll:!0,children:[l?e.jsxs(e.Fragment,{children:[e.jsx(I,{ref:x,placeholder:"Enter name","data-autofocus":!0,pr:"xs",styles:s=>({input:{minHeight:34,height:34,paddingInline:s.spacing.xs-1}}),sx:{flex:1},value:t,onChange:s=>o(s)}),e.jsx(h,{label:"Confirm",withinPortal:!0,children:e.jsx(m,{color:r.primaryColor,onClick:()=>{c(!1),D(a,n.id,{name:t})},children:e.jsx(E,{})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{size:"sm",px:"xs",sx:{flex:1},children:n.name}),e.jsx(h,{label:"Edit name",withinPortal:!0,children:e.jsx(m,{color:r.primaryColor,onClick:()=>c(!0),children:e.jsx(M,{})})})]}),e.jsx(h,{label:"Delete",withinPortal:!0,children:e.jsx(m,{color:"red",onClick:p,children:e.jsx(R,{})})})]})}function q({opened:n,close:d,label:r,items:i,addItem:x}){const l=j(),{height:c}=k(),[t,o]=L(""),a=i==null?void 0:i.filter(s=>s.name.match(new RegExp(t,"gi"))),p=!!(a!=null&&a.find(s=>s.name.toLowerCase()===t.toLowerCase()));return u.useEffect(()=>{n&&o("")},[n]),e.jsx(z,{opened:n,title:e.jsx(y,{order:5,children:`Manage ${r}s`}),size:420,overflow:"inside",trapFocus:!0,onClose:d,target:".modal-container",zIndex:2,children:e.jsxs(f,{spacing:"sm",children:[e.jsx(I,{icon:e.jsx(A,{}),placeholder:`Search ${r}`,maxLength:36,"data-autofocus":!0,value:t,onChange:o}),e.jsx($.Autosize,{maxHeight:`calc(${c}px - 240px)`,children:e.jsxs(f,{spacing:"xs",pb:2,children:[a==null?void 0:a.map(s=>e.jsx(v,{item:s,label:r},s.id)),!!t.length&&!p&&e.jsxs(g.div,{style:{display:"flex",alignItems:"center"},layoutId:"search",children:[e.jsx(C,{size:"sm",px:"xs",sx:{flex:1},children:t}),e.jsx(h,{label:`Add ${r}`,withinPortal:!0,children:e.jsx(m,{color:l.primaryColor,onClick:()=>{x({name:t}),o("")},children:e.jsx(T,{})})})]})]})})]})})}export{q as L};
